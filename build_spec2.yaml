version: 0.1
component: build
timeoutInSeconds: 1000
shell: bash

steps:
  - type: Command
    name: "Run Build"
    command: |
      mvn clean install -DskipTests
  - type: Command
    name: "zip the repo"
    command: |
      zip -r repo.zip ${OCI_WORKSPACE_DIR}/build
      ls
      cd notExist
    onFailure:
      - type: Command
        timeoutInSeconds: 400
        shell: /bin/sh
        command: |
          echo "Handling Failure"
          build_result=FAILURE
          echo "Failure successfully handled"
        timeoutInSeconds: 400
outputArtifacts:
  - name: built-gh-repo
    type: BINARY
    location: ${OCI_WORKSPACE_DIR}/build/repo.zip
