version: 0.1
component: build
timeoutInSeconds: 1000
shell: bash

env:
  exportedVariables:
    - isBuilt

steps:
  - type: Command
    name: "Run Build"
    command: |
      isBuilt=false
      mvn clean install -DskipTests && isBuilt=true
      echo "Build Completed"
  - type: Command
    name: "zip the repo"
    command: |
      zip -r repo.zip ${OCI_WORKSPACE_DIR}/build
outputArtifacts:
  - name: built-gh-repo
    type: BINARY
    location: ${OCI_WORKSPACE_DIR}/build/repo.zip
